/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2025 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */


/*
 * LEARNINGS
 * TO MAKE A BIT ZERO  ------> &= ~(0x3 << (5*2));
 *
 */
#include <stdint.h>
#include "stm32f446rxx.h"

void delay_ms(volatile uint32_t ms)
{
    for(uint32_t i = 0; i < ms * 4000; i++)
    {
        __asm__("nop");
    }
}

int main(void)
{
	/*
	 * 1. To start we need to enable the BUS connected to GPIOA
	 *    To Enable bus we need to Enable clock
	 * 2. To connect our lED we need to set the bit as output
	 * 	  In GPIOA Register list , we use MODER Register to set this as output
	 * 	  For that we need to set the 11 th and 10 th bit of MODER register as 0 and 1 respectively.
	 * 3. We use OTyper register for push pull - Make it as zero as per reference manual
	 * 4. Set the speed - Generally medium - for that 11 th and 10 th bit  - 01: Medium speed
	 * 5. Set PUPDR - pull up or pull down
	 * 6. Make LED ON or OFF initially
	 *
	 *
	 *
	 */
	GPIOA_CLK_EN();						//Enable GPIOA clock for that
	GPIOA->MODER &= ~(0x3 << 10); 		//11 th bit 0
	GPIOA->MODER|=(1<<10); 				// MAKE 10 TH BIT 1
	GPIOA->OTYPER &=~(1<<5);  			//SET TYPE -PUSH PULL
	GPIOA->OSPEEDR &= ~(0x3 << 10);		//0 1: Medium speed
	GPIOA->OSPEEDR|=(1<<10);
	GPIOA->PUPDR &= ~(0x3 << 10);		// 0 0: No pull-up, pull-down
	GPIOA->ODR &=~(1<<5); 				// To set Output level - High Or Low ; Make LED ON/ OFF initially

	while(1)
	    {
	        // 3. Toggle LED using XOR
	        GPIOP->ODR ^= (1 << 5);

	        // 4. Delay
	        delay_ms(500);
	    }


	for(;;);
}
